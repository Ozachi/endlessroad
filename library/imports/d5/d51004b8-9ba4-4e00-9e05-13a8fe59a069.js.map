{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\src\\role/assets\\src\\role\\panda-control.js"],"names":["cc","Class","extends","Component","properties","speed","v2","addSpeed","maxSpeed","gravity","jumpSpeed","collisionX","collisionY","direction","jumping","jumpCount","drag","prePosition","player","uiLayerComonent","onLoad","x","node","y","manager","director","getCollisionManager","enabled","getComponent","Animation","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","bind","onKeyReleased","onDestroy","onDisabled","enabledDebugDraw","keyCode","KEY","d","scaleX","play","a","j","collisionGoldEnter","other","self","removeFromParent","addGold","collisionPlatformEnter","selfAabb","world","aabb","clone","otherAabb","preAabb","Intersection","rectRect","xMax","xMin","width","yMax","yMin","height","onCollisionEnter","console","log","tag","onCollisionStay","offset","onCollisionExit","update","dt","Math","abs","trueDir"],"mappings":"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","file":"panda-control.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\src\\role","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speed:cc.v2(0, 0),\r\n        addSpeed: 600,\r\n        maxSpeed: cc.v2(10, 1000),\r\n        gravity: -1000,\r\n        jumpSpeed: 300,\r\n        collisionX: 0,\r\n        collisionY: 0,\r\n        direction: 0, //控制的方向，只有左右\r\n        jumping: false,\r\n        jumpCount: 0, //跳跃次数\r\n        drag: 1000,\r\n        prePosition:cc.v2(0,0), //上一帧的坐标\r\n        player: null, // 动画播放器\r\n\r\n        uiLayerComonent: null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n       this.prePosition.x = this.node.x;\r\n       this.prePosition.y = this.node.y;\r\n\r\n       var manager = cc.director.getCollisionManager();\r\n       manager.enabled = true;\r\n    //    manager.enabledDebugDraw = true;\r\n\r\n        this.player = this.node.getComponent(cc.Animation);\r\n\r\n\r\n       cc.eventManager.addListener({\r\n            event: cc.EventListener.KEYBOARD,\r\n            onKeyPressed: this.onKeyPressed.bind(this),\r\n            onKeyReleased: this.onKeyReleased.bind(this)\r\n        }, this.node);\r\n    },\r\n\r\n    onDestroy: function onDisabled() {\r\n        cc.director.getCollisionManager().enabled = false;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n    },\r\n\r\n    onKeyPressed: function (keyCode, event) {\r\n        switch (keyCode) {\r\n            case cc.KEY.d:\r\n                this.direction = 1;\r\n                this.node.scaleX=1;\r\n                if (!this.jumping) this.player.play(\"run\");    \r\n                break;\r\n            case cc.KEY.a:\r\n                this.direction = -1;\r\n                this.node.scaleX=-1;\r\n                if (!this.jumping) this.player.play(\"run\");   \r\n                break;\r\n            case cc.KEY.j:\r\n                if (!this.jumping || this.jumpCount < 2) {\r\n                    this.jumping = true;\r\n                    this.speed.y = this.jumpSpeed;\r\n                    this.jumpCount++;\r\n                    this.jumpCount < 2 ? this.player.play(\"jump\") : this.player.play(\"twiceJump\");\r\n                }\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyReleased: function (keyCode, event) {\r\n         switch (keyCode) {\r\n            case cc.KEY.d:\r\n                if (this.direction == 1) {\r\n                    this.direction = 0;\r\n                }\r\n                break;\r\n            case cc.KEY.a:\r\n                if (this.direction == -1) {\r\n                    this.direction = 0;\r\n                }\r\n                break;\r\n         }\r\n    },\r\n\r\n    collisionGoldEnter: function (other, self) {\r\n        other.node.removeFromParent();\r\n\r\n        this.uiLayerComonent.addGold();\r\n    },\r\n    \r\n\r\n    collisionPlatformEnter: function (other, self) {\r\n        var selfAabb = self.world.aabb.clone();\r\n        var otherAabb = other.world.aabb;\r\n        var preAabb = self.world.preAabb;\r\n\r\n        selfAabb.x = preAabb.x;\r\n        selfAabb.y = preAabb.y;\r\n\r\n        //检查X是否发生碰撞\r\n        selfAabb.x = self.world.aabb.x;\r\n        if (cc.Intersection.rectRect(selfAabb, otherAabb)) {\r\n            if (this.speed.x < 0 && selfAabb.xMax > otherAabb.xMax) {\r\n                this.node.x = otherAabb.xMax+30;\r\n                this.collisionX = -1;\r\n            } else if (this.speed.x > 0 && selfAabb.xMin < otherAabb.xMin) {\r\n                this.node.x = otherAabb.xMin - selfAabb.width+30;\r\n                this.collisionX = 1;\r\n            }\r\n\r\n            this.speed.x = 0;\r\n            return;\r\n        }\r\n\r\n        //检查Y是否发生碰撞\r\n        selfAabb.y = self.world.aabb.y;\r\n        if (cc.Intersection.rectRect(selfAabb, otherAabb)) {\r\n            if (this.speed.y < 0 && selfAabb.yMax > otherAabb.yMax) {\r\n                this.node.y = otherAabb.yMax;\r\n                this.jumping = false;\r\n                this.player.play(\"run\");\r\n                this.jumpCount = 0;\r\n                this.collisionY = -1;\r\n            } else if (this.speed.y > 0 && selfAabb.yMin < otherAabb.yMin) {\r\n                this.node.y = otherAabb.yMin - selfAabb.height;\r\n                this.collisionY = 1;\r\n            }\r\n\r\n            this.speed.y = 0;\r\n        }\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        console.log('on collision enter');\r\n        cc.log(\"coll tag = \" + other.tag);\r\n\r\n       if (other.tag == 1) {\r\n           this.collisionGoldEnter(other, self);\r\n       }\r\n       else{\r\n           this.collisionPlatformEnter(other, self);\r\n       }\r\n    },\r\n\r\n    onCollisionStay: function (other, self) {\r\n        // console.log('on collision stay');\r\n\r\n        if (other.tag != 0) return;\r\n        if (this.collisionY === -1) {\r\n            var offset = cc.v2(other.world.aabb.x - other.world.preAabb.x, 0);\r\n\r\n            // var temp = cc.affineTransformClone(self.world.transform);\r\n            // temp.tx = temp.ty = 0;\r\n\r\n            // offset = cc.pointApplyAffineTransform(offset, temp);\r\n            this.node.x += offset.x;\r\n        }\r\n    },\r\n    \r\n    /**\r\n     * 当碰撞结束后调用\r\n     * @param  {Collider} other 产生碰撞的另一个碰撞组件\r\n     * @param  {Collider} self  产生碰撞的自身的碰撞组件\r\n     */\r\n    onCollisionExit: function (other, self) {\r\n        console.log('on collision exit');\r\n        if (other.tag != 0) return;\r\n        \r\n        this.collisionX = 0;\r\n        this.collisionY = 0;\r\n        this.jumping = true;\r\n        this.jumpCount = 1;\r\n        this.player.play(\"jump\");\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        /**\r\n         * Y轴变化\r\n         *  */ \r\n        if (this.collisionY === 0) //没任何碰撞，计算重力\r\n        {\r\n            this.speed.y += this.gravity * dt;\r\n            if (Math.abs(this.speed.y) > this.maxSpeed.y) \r\n            {\r\n                this.speed.y = this.speed.y > 0 ? this.maxSpeed.y : -this.maxSpeed.y;\r\n            }\r\n        } \r\n\r\n        if (this.direction === 0) {\r\n            //停下的时候，计算摩擦力 \r\n            if (this.speed.x > 0) {\r\n                this.speed.x -= this.drag * dt;\r\n                if (this.speed.x <= 0) this.speed.x = 0;\r\n            } else if (this.speed.x < 0) {\r\n                this.speed.x += this.drag * dt;\r\n                if (this.speed.x >= 0) this.speed.x = 0;\r\n            }\r\n        } else {\r\n            //左右速度行走,如果反方向，速度用更大的摩擦力，令方向更快改变\r\n            var trueDir = this.speed.x > 0 ? 1 : -1;\r\n            if (this.speed.x == 0) trueDir = 0;\r\n            var speed = (trueDir == this.direction ? this.addSpeed : 3000);\r\n\r\n            this.speed.x += (this.direction > 0 ? 1 : -1) * speed * dt;\r\n            if (Math.abs(this.speed.x) > this.maxSpeed.x) {\r\n                this.speed.x = this.speed.x > 0 ? this.maxSpeed.x : -this.maxSpeed.x;\r\n            }\r\n        }\r\n\r\n        //左右有碰撞,X立刻停下\r\n        if (this.speed.x * this.collisionX > 0) {\r\n            this.speed.x = 0;\r\n        }\r\n\r\n        this.prePosition.x = this.node.x;\r\n        this.prePosition.y = this.node.y;\r\n\r\n        this.node.x += this.speed.x * dt;\r\n        this.node.y += this.speed.y * dt;\r\n    },\r\n});\r\n"]}